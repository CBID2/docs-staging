---
title: Back up and Restore TiDB Cluster Data
summary: Learn how to back up and restore your TiDB Cloud cluster.
aliases: ['/tidbcloud/restore-deleted-tidb-cluster']
---

# TiDB クラスター データのバックアップと復元 {#back-up-and-restore-tidb-cluster-data}

このドキュメントでは、 TiDB Cloudで TiDBクラスタデータをバックアップおよび復元する方法について説明します。

> **ノート：**
>
> [開発者層のクラスター](/tidb-cloud/select-cluster-tier.md#developer-tier)の場合、バックアップおよび復元機能は使用できません。 [Dumpling](https://docs.pingcap.com/tidb/stable/dumpling-overview)を使用して、データをバックアップとしてエクスポートできます。

## バックアップ {#backup}

TiDB Cloudは、自動バックアップと手動バックアップの 2 種類のデータ バックアップを提供します。

TiDB Cloud内の TiDB クラスターに対して、毎日のバックアップが自動的にスケジュールされます。バックアップ スナップショットを選択して、いつでも新しい TiDBクラスタに復元できます。自動バックアップにより、極端な災害状況での損失を減らすことができます。

### 自動バックアップ {#automatic-backup}

自動バックアップにより、設定したバックアップ時刻に毎日クラスタデータをバックアップできます。バックアップ時間を設定するには、次の手順を実行します。

1.  クラスタの [**バックアップ**] タブに移動します。

2.  [**自動設定]**をクリックします。設定ウィンドウが表示されます。

3.  設定ウィンドウで、 [**制限 (バックアップ ファイル)]**で [<strong>バックアップ時間</strong>] と [バックアップ ファイルの最大数] を選択します。

4.  [**確認]**をクリックします。

優先バックアップ時間を指定しない場合、 TiDB Cloudは各地域に基づいてデフォルトのバックアップ時間を割り当てます。次の表に、各リージョンのデフォルトのバックアップ時間を示します。

| クラウド プロバイダー | リージョン                    | デフォルトのバックアップ時間 |
| ----------- | ------------------------ | -------------- |
| AWS         | オレゴン (us-west-2)         | 10:00 UTC      |
| AWS         | 北バージニア (us-east-1)       | 07:00 UTC      |
| AWS         | ムンバイ (ap-south-1)        | 20:30 UTC      |
| AWS         | シンガポール (ap-southeast-1)  | 18:00 UTC      |
| AWS         | 東京 (ap-northeast-1)      | 17:00 UTC      |
| AWS         | フランクフルト (eu-central-1)   | 03:00 UTC      |
| GCP         | オレゴン (us-west1)          | 10:00 UTC      |
| GCP         | アイオワ (us-central1)       | 08:00 UTC      |
| GCP         | シンガポール (asia-southeast1) | 18:00 UTC      |
| GCP         | 台湾 (asia-east1)          | 18:00 UTC      |
| GCP         | 東京 (asia-northeast1)     | 17:00 UTC      |

自動バックアップを無効にすることはできないことに注意してください。

### 手動バックアップ {#manual-backup}

手動バックアップは、必要に応じてデータを既知の状態にバックアップし、いつでもその状態に復元できる、ユーザーが開始するバックアップです。

TiDBクラスタに手動バックアップを適用するには、次の手順を実行します。

1.  クラスタの [**バックアップ**] タブに移動します。

2.  右上の [**手動]**をクリックします。

3.  **名前**を入力します。

4.  [**確認]**をクリックします。次に、クラスタデータがバックアップされます。

### バックアップファイルを削除する {#delete-backup-files}

既存のバックアップ ファイルを削除するには、次の手順を実行します。

1.  クラスタの [**バックアップ**] タブに移動します。

2.  削除するバックアップ ファイルの [**削除]**をクリックします。

### 実行中のバックアップ ジョブを削除する {#delete-a-running-backup-job}

実行中のバックアップ ジョブを削除するには、 [**バックアップファイルを削除する**](#delete-backup-files)と同様です。

1.  クラスタの [**バックアップ**] タブに移動します。

2.  **保留中**または<strong>実行中</strong>の状態にあるバックアップ ファイルの [<strong>削除]</strong>をクリックします。

### バックアップのベスト プラクティス {#best-practices-for-backup}

-   ビジネスへの影響を最小限に抑えるために、クラスタのアイドル時間にバックアップ操作を実行することをお勧めします。
-   データのインポート中、またはクラスタのスケーリング中に手動バックアップを実行しないでください。
-   クラスタを削除した後、既存の手動バックアップ ファイルは、手動で削除するか、アカウントが閉鎖されるまで保持されます。自動バックアップ ファイルは、クラスタの削除日から 7 日間保持されます。それに応じて、バックアップ ファイルを削除する必要があります。

## 戻す {#restore}

TiDB Cloudは、2 種類のデータ復元を提供します。

-   バックアップ データを新しいクラスタに復元する
-   ごみ箱から削除されたクラスタを復元する

### データを新しいクラスタに復元する {#restore-data-to-a-new-cluster}

TiDBクラスタデータをバックアップから新しいクラスタに復元するには、次の手順を実行します。

1.  クラスタの [**バックアップ**] タブに移動します。

2.  リストで既存のバックアップを選択し、[**復元]**をクリックします。

3.  [**復元]**ウィンドウで、必要に応じて次の変更を行います。

    -   クラスタのポート番号を更新します。
    -   クラスタのノード サイズ、ノード数、ストレージ サイズを増やします。

4.  [**確認]**をクリックします。

    クラスタの復元プロセスが開始され、 **[セキュリティの設定**] ダイアログ ボックスが表示されます。

5.  [**セキュリティの設定**] ダイアログ ボックスで、root パスワードと許可された IP アドレスを設定してクラスタに接続し、[<strong>適用</strong>] をクリックします。

### 削除されたクラスタを復元する {#restore-a-deleted-cluster}

ごみ箱から削除されたクラスタを復元するには、次の手順を実行します。

1.  TiDB Cloudコンソールで、ターゲット プロジェクトに移動し、[**ごみ箱**] タブをクリックします。

2.  復元するクラスタを見つけて、[**アクション**] 列の [<strong>バックアップ</strong>] をクリックします。

3.  目的のバックアップ時刻を見つけて、[**復元]**をクリックします。

4.  [**復元]**ウィンドウで、必要に応じて次の変更を行います。

    -   クラスタのポート番号を更新します。
    -   クラスタのノード サイズ、ノード数、およびストレージ サイズを増やします。

5.  [**確認]**をクリックします。

    クラスタの復元プロセスが開始され、 **[セキュリティの設定**] ダイアログ ボックスが表示されます。

6.  [**セキュリティの設定**] ダイアログ ボックスで、root パスワードと許可された IP アドレスを設定してクラスタに接続し、[<strong>適用</strong>] をクリックします。
